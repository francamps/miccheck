/*! miccheck - v0.0.0 - 2015-11-05 */$(function(){"use strict";function a(a){a||(a=t.additionalFile?o:n),r.addClass("loading"),t.isDoneLoading||$.getJSON(a,function(a){p=p.concat(a),b(),l()}).always(function(){r.removeClass("loading"),s.removeClass("loading")}).fail(function(){r.html("Something went wrong loading the articles.")})}function b(){t.isDoneLoading=p.length>=n.length+o.length}function c(a){var b=a.profile.first_name,c=a.profile.last_name;return b+" "+c}function d(a){return moment(a.publish_at,"YYYY-MM-DD HH:mm:ss").fromNow()}function e(){q=p.slice(0,t.show)}function f(){q=_.sortBy(q,function(a){return a[t.sortBy]}).reverse()}function g(){r.empty(),$.each(q,function(a,b){var c=a%2===0?"even":"odd",d='<div class="article-row row-'+a+" "+c+'"></div>';r.append(d),$(".row-"+a).html(i(b)),s.removeClass("loading")})}function h(){$(".count-articles").html(" ("+q.length+" shown)")}function i(a){var b='<div class="cell">',e=b+'<img width="50" height="50" src="'+a.image+'" onError="this.onerror=null;this.src=\'./assets/images/no-image.png\';"/>';return e+='<a href="'+a.url+'">'+a.title+"</a></div>",e+=b+'<p class="author">'+c(a)+"</p></div>",e+=b+"<p>"+a.words+"</p></div>",e+=b+"<p>"+d(a)+"</p></div>"}function j(){$(".words-header").click(function(){t.sortBy="words",localStorage.sortBy="words",$(".sorted").removeClass("sorted"),$(this).addClass("sorted"),l()}),$(".submitted-header").click(function(){t.sortBy="publish_at",localStorage.sortBy="publish_at",$(".sorted").removeClass("sorted"),$(this).addClass("sorted"),l()}),"words"===localStorage.sortBy?$(".words-header").addClass("sorted"):"publish_at"===localStorage.sortBy&&$(".submitted-header").addClass("sorted")}function k(){s.click(function(){$(this).addClass("loading"),t.show+=10,t.isDoneLoading?t.show>p.length?$(this).html("No more articles").addClass("disabled"):l():t.show>p.length?(t.additionalFile=!0,a()):l()})}function l(){e(),f(),g(),h()}var m="assets/data/",n=m+"articles.json",o=m+"more-articles.json",p=[],q=[],r=$(".article-table-body"),s=$(".show-more > .button"),t={show:10,additionalFile:!1,isDoneLoading:!1,sortBy:localStorage.sortBy||"title"};a(),k(),j()}());