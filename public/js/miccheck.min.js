/*! miccheck - v0.0.0 - 2015-11-05 */$(function(){"use strict";function a(a){a||(a=s.additionalFile?n:m),q.addClass("loading"),s.isDoneLoading||$.getJSON(a,function(a){o=o.concat(a),b(),k()}).always(function(){q.removeClass("loading"),r.removeClass("loading")}).fail(function(){q.html("Something went wrong loading the articles.")})}function b(){s.isDoneLoading=o.length>=m.length+n.length}function c(a){var b=a.profile.first_name,c=a.profile.last_name;return b+" "+c}function d(a){return moment(a.publish_at,"YYYY-MM-DD HH:mm:ss").fromNow()}function e(){p=o.slice(0,s.show)}function f(){p=_.sortBy(p,function(a){return a[s.sortBy]}).reverse()}function g(){q.empty(),$.each(p,function(a,b){var c=a%2===0?"even":"odd",d='<div class="article-row row-'+a+" "+c+'"></div>';q.append(d),$(".row-"+a).html(h(b)),r.removeClass("loading")})}function h(a){var b='<div class="cell">',e=b+'<img width="50" height="50" src="'+a.image+'"/>';return e+='<a href="'+a.url+'">'+a.title+"</a></div>",e+=b+"<p>"+c(a)+"</p></div>",e+=b+"<p>"+a.words+"</p></div>",e+=b+"<p>"+d(a)+"</p></div>"}function i(){$(".words-header").click(function(){s.sortBy="words",localStorage.sortBy="words",$(".sorted").removeClass("sorted"),$(this).addClass("sorted"),k()}),$(".submitted-header").click(function(){s.sortBy="publish_at",localStorage.sortBy="publish_at",$(".sorted").removeClass("sorted"),$(this).addClass("sorted"),k()})}function j(){r.click(function(){$(this).addClass("loading"),s.show+=10,s.isDoneLoading?s.show>o.length?$(this).html("No more articles").addClass("disabled"):k():s.show>o.length?(s.additionalFile=!0,a()):k()})}function k(){e(),f(),g()}var l="assets/data/",m=l+"articles.json",n=l+"more-articles.json",o=[],p=[],q=$(".article-table-body"),r=$(".show-more > .button"),s={show:10,additionalFile:!1,isDoneLoading:!1,sortBy:localStorage.sortBy||"title"};a(),j(),i()}());